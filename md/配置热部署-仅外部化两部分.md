# 配置热部署（仅外部化两部分）

本指南介绍如何在不重新打包的情况下热修改两类配置：

- `BEST_HYPERPARAMETERS`
- `EXPERIMENT_CONFIGS`

## 放置位置

- 推荐在可执行文件同级目录下创建 `configs\config.json`
- 或在当前工作目录创建 `configs\config.json`
- 也支持通过环境变量指定：设置 `OUTPUT_PREDICTION_CONFIG_PATH` 指向你的 JSON 文件

> Windows 下示例路径：`C:\path\to\app\configs\config.json`

## JSON 结构示例

已提供模板：`configs\config.example.json`。复制为 `config.json` 后按需修改即可。

支持在 `EXPERIMENT_CONFIGS.exp2.best_hyperparams` 使用占位符 `"$BEST_HYPERPARAMETERS"`，自动解析为当前最优超参数集合，避免重复粘贴。

## 打包注意事项（PyInstaller）

- 若希望在首次发布就包含模板，可在打包时把 `configs` 目录作为资源一起打包：
  - Windows（命令行）：`pyinstaller --add-data "configs;configs" pyinstaller-windows.spec`
  - Windows（spec 文件 `Analysis` / `EXE` 的 `datas` 字段）：添加元组 `("configs", "configs")`
- Onefile 模式下也支持从临时目录读取（代码中已处理 `sys._MEIPASS`）。

## 覆盖范围与安全

- 仅覆盖 `BEST_HYPERPARAMETERS` 与 `EXPERIMENT_CONFIGS`
- 外部 JSON 结构错误会抛出异常，便于定位问题
- 其他配置项（如模型类型、搜索空间等）继续使用代码默认值

## 使用流程

1. 复制 `configs\config.example.json` 为 `configs\config.json`
2. 修改 `config.json` 中的两类配置
3. 将 `configs` 文件夹与可执行文件放在一起，或设置环境变量路径
4. 运行程序，构造配置对象时将自动读取并应用覆盖

## 备注

- 不需要修改或替换 `utils\config.py`，只要在外部提供 JSON 即可覆盖上述两类配置
- 如需撤销覆盖，删除或重命名外部 `config.json` 即可恢复代码内默认值